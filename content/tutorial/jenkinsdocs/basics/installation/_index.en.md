---
title: "Jenkinså®‰è£…éƒ¨ç½² "
weight: 20
#pre: "<b> </b>"
chapter: true
draft: false
date: 2018-12-29T11:02:05+06:00
lastmod: 2020-01-05T10:42:26+06:00
# search related keywords
keywords: ["Jenkinså®‰è£…éƒ¨ç½²"]
---


æ‚¨å¥½ï¼Œæœ¬ç« æˆ‘ä»¬å°†æŒ‡å¯¼å¤§å®¶å¦‚ä½•å®‰è£…Jenkinsï¼Œå¾ˆç®€å•ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å®‰è£…å§ï¼ ğŸ˜€


### ç›®å½•

+ [å…ˆå†³æ¡ä»¶](#å…ˆå†³æ¡ä»¶)
  - [è½¯ä»¶è¦æ±‚](#è½¯ä»¶è¦æ±‚)
  - [ç¡¬ä»¶è¦æ±‚](#ç¡¬ä»¶è¦æ±‚)

+ [è½¯ä»¶åŒ…ä¸‹è½½](#è½¯ä»¶åŒ…ä¸‹è½½)
  - [waråŒ…éƒ¨ç½²](#waråŒ…éƒ¨ç½²)
  - [linuxç³»ç»Ÿéƒ¨ç½²](#linuxç³»ç»Ÿéƒ¨ç½²)
  - [macç³»ç»Ÿéƒ¨ç½²](#macç³»ç»Ÿéƒ¨ç½²)
  - [windowsç³»ç»Ÿéƒ¨ç½²](#windowsç³»ç»Ÿéƒ¨ç½²)

+ [å®‰è£…ååŸºæœ¬é…ç½®](#å®‰è£…ååŸºæœ¬é…ç½®)
  - [è§£é”](#è§£é”)
  - [è‡ªå®šä¹‰jenkinsæ’ä»¶](#è‡ªå®šä¹‰jenkinsæ’ä»¶)
  - [åˆ›å»ºç”¨æˆ·](#åˆ›å»ºç”¨æˆ·)
  - [é…ç½®æ›´æ–°ç«™ç‚¹](#é…ç½®æ›´æ–°ç«™ç‚¹)
  - [å®‰è£…slaveèŠ‚ç‚¹](#å®‰è£…slaveèŠ‚ç‚¹)
  - [jenkinsé…ç½®æ–‡ä»¶](#jenkinsé…ç½®æ–‡ä»¶)

---

### å…ˆå†³æ¡ä»¶

#### è½¯ä»¶è¦æ±‚
* Java8 æ— è®ºæ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒï¼ˆJREï¼‰è¿˜æ˜¯Javaå¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰éƒ½å¯ä»¥ã€‚

#### ç¡¬ä»¶è¦æ±‚
* æœ€ä½é…ç½®ï¼š 256MBå¯ç”¨å†…å­˜ï¼Œ1GBå¯ç”¨ç£ç›˜ç©ºé—´ï¼ˆDockeræ¨è10GBï¼‰ã€‚
* å°å›¢é˜Ÿé…ç½®ï¼š 1GB+å¯ç”¨å†…å­˜ï¼Œ 50GB+å¯ç”¨ç£ç›˜ç©ºé—´ã€‚

### è½¯ä»¶åŒ…ä¸‹è½½
* [æœ€æ–°waråŒ…](https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/)
* [æœ€æ–°pkgåŒ…](http://mirrors.jenkins.io/osx/latest)
* [æœ€æ–°exeåŒ…](http://mirrors.jenkins.io/windows/latest)
* [æœ€æ–°rpmåŒ…](https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat-stable/)

#### waråŒ…éƒ¨ç½²
Jenkinsçš„webåº”ç”¨ç¨‹åºarchiveï¼ˆwarï¼‰åŒ…æ˜¯å¯ä»¥åœ¨ä»»ä½•æ”¯æŒJavaçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚

* å°†ä¸‹è½½çš„waråŒ…æ”¾åˆ°jenkinsçš„ç›®å½•ä¸­ï¼ˆå¯ä»¥è‡ªå®šä¹‰)ã€‚
* è¿è¡Œå‘½ä»¤ `java -jar jenkins.war`å¯åŠ¨ã€‚
* æ­¤æ—¶å¯ä»¥çœ‹åˆ°Jenkinsçš„å¯åŠ¨æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸ã€‚
* é€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8080`ã€‚

{{% notice info %}}
æ³¨æ„ï¼šå¯ä»¥é€šè¿‡ â€“httpPortæ–¹å¼æŒ‡å®šç«¯å£ï¼Œ `java -jar jenkins.war -httpPort=9090ã€‚`
{{% /notice %}}


#### linuxç³»ç»Ÿéƒ¨ç½²

* é¦–å…ˆä¸‹è½½rpmè½¯ä»¶åŒ…,å®‰è£…`rpm â€“ivh jenkins-2.150.3-1.1.noarch.rpm` 
* `systemctl start jenkins` #å¯åŠ¨æœåŠ¡
* `systemctl enable jenkins` #å¼€æœºè‡ªå¯

#### macç³»ç»Ÿéƒ¨ç½²
ä¸‹è½½è½¯ä»¶åŒ…æ‰‹åŠ¨å®‰è£…

* `brew install jenkins` å®‰è£…jenkinsæœ€æ–°ç‰ˆæœ¬
* `brew install jenkins-lts`  å®‰è£…jenkinsLTSç‰ˆæœ¬


#### windowsç³»ç»Ÿéƒ¨ç½²
ä¸‹è½½è½¯ä»¶åŒ…é€šè¿‡å‘å¯¼å®‰è£…å³å¯ã€‚


### å®‰è£…ååŸºæœ¬é…ç½®

#### è§£é”

å½“æ‚¨ç¬¬ä¸€æ¬¡è®¿é—®Jenkinsçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„å¯†ç å¯¹å…¶è¿›è¡Œè§£é”ã€‚è§£é”ç§˜é’¥å¯ä»¥é€šè¿‡$JENKINS_HOME/secrets/initialAdminPasswordæ–‡ä»¶è·å–ã€‚è¿˜å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨æ—¥å¿—ä¸­è·å–ã€‚

![images](images/01-unlockjenkins.png)


#### è‡ªå®šä¹‰jenkinsæ’ä»¶

* è§£é”Jenkinsä¹‹åå†è‡ªå®šä¹‰Jenkinsé¡µé¢ï¼Œæ‚¨å¯ä»¥å®‰è£…ä»»ä½•æ•°é‡çš„æ’ä»¶ä½œä¸ºåˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ã€‚
* åˆ†åˆ«æ˜¯å®‰è£…å»ºè®®çš„æ’ä»¶å’Œé€‰æ‹©è¦å®‰è£…çš„æ’ä»¶ï¼ˆå¦‚æœä¸ç¡®å®šè¦å®‰è£…é‚£äº›çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ­¤é€‰é¡¹ï¼Œçµæ´»çš„è‡ªå®šä¹‰å®‰è£…ï¼‰ã€‚
* æ’ä»¶å®‰è£…å¤šäº†ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥åé¢å†jenkinsæ’ä»¶ç®¡ç†é¡µé¢åˆ é™¤å“¦(ä¼šå¾ˆç¹ç)ã€‚

![images](images/02-customjenkins.png)

#### åˆ›å»ºç”¨æˆ·
åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·ï¼Œåˆ°æ­¤jenkinsçš„åˆå§‹åŒ–é…ç½®å·²å®Œæˆã€‚
![images](images/03-createuser.png)

#### é…ç½®æ›´æ–°ç«™ç‚¹


å½“æ”¹å®Œåï¼Œå…¶å®è¿˜æ˜¯å¾ˆæ…¢ ğŸ¤·â€â™€ï¸ å»ºè®®é…ç½®nginxåšåŸŸåä»£ç† ğŸ˜œ

ç”±äºä½¿ç”¨å®˜æ–¹çš„ç«™ç‚¹é€Ÿåº¦ç›¸å¯¹å¾ˆæ…¢ï¼Œè¿™é‡Œé‡‡ç”¨[æ¸…åå¤§å­¦çš„jenkinsæ›´æ–°ç«™ç‚¹](https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json)ã€‚

![images](images/04-updatesite.png)


#### å®‰è£…slaveèŠ‚ç‚¹


 ğŸ˜œ æ³¨æ„éœ€è¦å¼€å¯jnlpåè®®æ‰èƒ½ä½¿ç”¨java webå¯åŠ¨ï¼Œå…·ä½“æ“ä½œï¼š ç³»ç»Ÿè®¾ç½®-> å…¨å±€å®‰å…¨ -> ä»£ç†é…ç½®

ç³»ç»Ÿç®¡ç†->èŠ‚ç‚¹ç®¡ç†

![images](images/05-configslave.png)

åˆ›å»ºå®Œæˆåä¼šå‡ºç°slaveèŠ‚ç‚¹å¯åŠ¨çš„å‘½ä»¤ï¼Œä¸‹è½½agent.jarï¼Œç„¶åå¯åŠ¨æœåŠ¡ã€‚

![images](images/06-slavestatus.png)

å¯åŠ¨å‘½ä»¤

```shell
wget http://192.168.0.41/jnlpJars/agent.jar
java -jar agent.jar -jnlpUrl http://192.168.0.41/computer/test1/slave-agent.jnlp -secret 807b0135fb5b071d99930166ac4fc5dd0cf355e670a66da73120dfa2e8cebc5f -workDir "/var/lib/jenkins"
```

å¯åŠ¨æˆåŠŸ
![images](images/07-slavestart.png)


#### jenkinsé…ç½®æ–‡ä»¶
ä»¥rpmæ–¹å¼éƒ¨ç½²çš„é…ç½®æ–‡ä»¶åœ¨/etc/sysconfig/jenkinsï¼Œå¯ä»¥å®šä¹‰Jenkinså¯åŠ¨å‚æ•°å’Œç«¯å£ã€‚

![images](images/08-jenkinsconfig.png)



---








